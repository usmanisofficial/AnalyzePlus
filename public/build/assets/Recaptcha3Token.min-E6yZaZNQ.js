var g=(i,c)=>()=>(c||i((c={exports:{}}).exports,c),c.exports);var w=g((h,d)=>{(function(i,c){typeof h=="object"&&typeof d<"u"?d.exports=c():typeof define=="function"&&define.amd?define(c):(i=typeof globalThis<"u"?globalThis:i||self,i.FormValidation=i.FormValidation||{},i.FormValidation.plugins=i.FormValidation.plugins||{},i.FormValidation.plugins.Recaptcha3Token=c())})(void 0,function(){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,o){return t&&c(e.prototype,t),o&&c(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},f(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},l(e,t)}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function s(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function b(e){var t=_();return function(){var r=f(e),n;if(t){var u=f(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return v(this,n)}}var O=FormValidation.Plugin,p=function(e){m(o,e);var t=b(o);function o(r){var n;return i(this,o),n=t.call(this,r),n.opts=Object.assign({},{action:"submit",hiddenTokenName:"___hidden-token___"},r),n.onValidHandler=n.onFormValid.bind(s(n)),n}return y(o,[{key:"install",value:function(){this.core.on("core.form.valid",this.onValidHandler),this.hiddenTokenEle=document.createElement("input"),this.hiddenTokenEle.setAttribute("type","hidden"),this.core.getFormElement().appendChild(this.hiddenTokenEle);var n=typeof window[o.LOADED_CALLBACK]>"u"?function(){}:window[o.LOADED_CALLBACK];window[o.LOADED_CALLBACK]=function(){n()};var u=this.getScript();if(!document.body.querySelector('script[src="'.concat(u,'"]'))){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.defer=!0,a.src=u,document.body.appendChild(a)}}},{key:"uninstall",value:function(){this.core.off("core.form.valid",this.onValidHandler);var n=this.getScript(),u=[].slice.call(document.body.querySelectorAll('script[src="'.concat(n,'"]')));u.forEach(function(a){return a.parentNode.removeChild(a)}),this.core.getFormElement().removeChild(this.hiddenTokenEle)}},{key:"onFormValid",value:function(){var n=this;window.grecaptcha.execute(this.opts.siteKey,{action:this.opts.action}).then(function(u){n.hiddenTokenEle.setAttribute("name",n.opts.hiddenTokenName),n.hiddenTokenEle.value=u;var a=n.core.getFormElement();a instanceof HTMLFormElement&&a.submit()})}},{key:"getScript",value:function(){var n=this.opts.language?"&hl=".concat(this.opts.language):"";return"https://www.google.com/recaptcha/api.js?"+"onload=".concat(o.LOADED_CALLBACK,"&render=").concat(this.opts.siteKey).concat(n)}}]),o}(O);return p.LOADED_CALLBACK="___reCaptcha3Loaded___",p})});export default w();
