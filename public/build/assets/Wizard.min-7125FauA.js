var E=(s,u)=>()=>(u||s((u={exports:{}}).exports,u),u.exports);var O=E((g,S)=>{(function(s,u){typeof g=="object"&&typeof S<"u"?S.exports=u():typeof define=="function"&&define.amd?define(u):(s=typeof globalThis<"u"?globalThis:s||self,s.FormValidation=s.FormValidation||{},s.FormValidation.plugins=s.FormValidation.plugins||{},s.FormValidation.plugins.Wizard=u())})(void 0,function(){function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function x(e,n,r){return n&&u(e.prototype,n),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&d(e,n)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},l(e)}function d(e,n){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,t){return i.__proto__=t,i},d(e,n)}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function P(e){var n=b();return function(){var i=l(e),t;if(n){var o=l(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return k(this,t)}}var w=FormValidation.Plugin,f=FormValidation.utils.classSet,v=FormValidation.plugins.Excluded,y=function(e){_(r,e);var n=P(r);function r(i){var t;return s(this,r),t=n.call(this,i),t.currentStep=0,t.numSteps=0,t.stepIndexes=[],t.opts=Object.assign({},{activeStepClass:"fv-plugins-wizard--active",onStepActive:function(){},onStepInvalid:function(){},onStepValid:function(){},onValid:function(){},stepClass:"fv-plugins-wizard--step"},i),t.prevStepHandler=t.onClickPrev.bind(h(t)),t.nextStepHandler=t.onClickNext.bind(h(t)),t}return x(r,[{key:"install",value:function(){var t=this;this.core.registerPlugin(r.EXCLUDED_PLUGIN,this.opts.isFieldExcluded?new v({excluded:this.opts.isFieldExcluded}):new v);var o=this.core.getFormElement();this.steps=[].slice.call(o.querySelectorAll(this.opts.stepSelector)),this.numSteps=this.steps.length,this.steps.forEach(function(p){f(p,c({},t.opts.stepClass,!0))}),f(this.steps[0],c({},this.opts.activeStepClass,!0)),this.stepIndexes=Array(this.numSteps).fill(0).map(function(p,a){return a}),this.prevButton=typeof this.opts.prevButton=="string"?this.opts.prevButton.substring(0,1)==="#"?document.getElementById(this.opts.prevButton.substring(1)):o.querySelector(this.opts.prevButton):this.opts.prevButton,this.nextButton=typeof this.opts.nextButton=="string"?this.opts.nextButton.substring(0,1)==="#"?document.getElementById(this.opts.nextButton.substring(1)):o.querySelector(this.opts.nextButton):this.opts.nextButton,this.prevButton.addEventListener("click",this.prevStepHandler),this.nextButton.addEventListener("click",this.nextStepHandler)}},{key:"uninstall",value:function(){this.core.deregisterPlugin(r.EXCLUDED_PLUGIN),this.prevButton.removeEventListener("click",this.prevStepHandler),this.nextButton.removeEventListener("click",this.nextStepHandler),this.stepIndexes.length=0}},{key:"getCurrentStep",value:function(){return this.currentStep}},{key:"goToPrevStep",value:function(){var t=this,o=this.currentStep-1;if(!(o<0)){var p=this.opts.isStepSkipped?this.stepIndexes.slice(0,this.currentStep).reverse().find(function(a,m){return!t.opts.isStepSkipped({currentStep:t.currentStep,numSteps:t.numSteps,targetStep:a})}):o;this.goToStep(p),this.onStepActive()}}},{key:"goToNextStep",value:function(){var t=this;this.core.validate().then(function(o){if(o==="Valid"){var p=t.currentStep+1;if(p>=t.numSteps)t.currentStep=t.numSteps-1;else{var a=t.opts.isStepSkipped?t.stepIndexes.slice(p,t.numSteps).find(function(m,V){return!t.opts.isStepSkipped({currentStep:t.currentStep,numSteps:t.numSteps,targetStep:m})}):p;p=a,t.goToStep(p)}t.onStepActive(),t.onStepValid(),p===t.numSteps&&t.onValid()}else o==="Invalid"&&t.onStepInvalid()})}},{key:"goToStep",value:function(t){f(this.steps[this.currentStep],c({},this.opts.activeStepClass,!1)),f(this.steps[t],c({},this.opts.activeStepClass,!0)),this.currentStep=t}},{key:"onClickPrev",value:function(){this.goToPrevStep()}},{key:"onClickNext",value:function(){this.goToNextStep()}},{key:"onStepActive",value:function(){var t={numSteps:this.numSteps,step:this.currentStep};this.core.emit("plugins.wizard.step.active",t),this.opts.onStepActive(t)}},{key:"onStepValid",value:function(){var t={numSteps:this.numSteps,step:this.currentStep};this.core.emit("plugins.wizard.step.valid",t),this.opts.onStepValid(t)}},{key:"onStepInvalid",value:function(){var t={numSteps:this.numSteps,step:this.currentStep};this.core.emit("plugins.wizard.step.invalid",t),this.opts.onStepInvalid(t)}},{key:"onValid",value:function(){var t={numSteps:this.numSteps};this.core.emit("plugins.wizard.valid",t),this.opts.onValid(t)}}]),r}(w);return y.EXCLUDED_PLUGIN="___wizardExcluded",y})});export default O();
